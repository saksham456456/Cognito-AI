<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cognito AI</title>
    <!-- Loading Tailwind CSS from a CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Importing Google Fonts for custom fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Roboto+Mono:wght@400;500&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      :root {
        /* Defining CSS variables for the Cyber Glow Dark Theme */
        /* These variables control the look and feel of the entire app */
        --bg-dark: #0A0A0E; /* Dark background color */
        --bg-glass: hsla(240, 10%, 10%, 0.5); /* Background for glassmorphism effect */
        --border-glass: hsla(240, 10%, 20%, 0.8); /* Glassmorphism border */
        --primary-glow: hsl(48, 100%, 55%); /* Main highlight color (yellow) */
        --primary-glow-faded: hsla(48, 100%, 55%, 0.1); /* Faint yellow glow */
        --primary-glow-heavy: hsla(48, 100%, 55%, 0.6); /* Deep yellow glow */
        --accent1-glow: hsl(220, 100%, 65%); /* First accent color (blue) */
        --accent2-glow: hsl(310, 100%, 65%); /* Second accent color (pink/purple) */
        --text-light: hsl(0, 0%, 92%); /* Light text color */
        --text-medium: hsl(0, 0%, 60%); /* Medium text color */
        --text-dark: hsl(0, 0%, 40%); /* Dark text color */

        /* Setting the default font */
        font-family: 'Inter', sans-serif;
      }

      body {
        /* Setting the default background and text color for the body */
        background-color: var(--bg-dark);
        color: var(--text-light);
        overflow: hidden; /* To hide scrollbars */
      }
      
      /* Custom font class for headings */
      .font-heading {
        font-family: 'Rajdhani', sans-serif;
      }
      /* Custom font class for code */
      .font-code {
        font-family: 'Roboto Mono', monospace;
      }

      /* Root element of the React app, will appear above the canvas */
      #root {
        position: relative;
        z-index: 1;
      }
      
      /* Class to add a primary color glow to text */
      .text-glow-primary {
        text-shadow: 0 0 4px var(--primary-glow-faded), 0 0 8px var(--primary-glow-faded), 0 0 16px var(--primary-glow-faded);
      }
      
      /* Class for the glassmorphism effect */
      .glassmorphism {
        background: var(--bg-glass);
        -webkit-backdrop-filter: blur(12px); /* Blurs the background */
        backdrop-filter: blur(12px);
        border: 1px solid var(--border-glass);
      }
      
      /* Class for a glow effect on the border */
      .glow-border {
         transition: box-shadow 0.3s ease-in-out;
         box-shadow: inset 0 0 0.5px 1px hsla(0, 0%, 100%, 0.075),
                    0 0 1px 0px var(--primary-glow-faded),
                    0 0 3px 0px var(--primary-glow-faded);
      }

      /* Active/focused state for glow border */
      .glow-border-active {
        box-shadow: inset 0 0 2px 1px var(--primary-glow-faded),
                    0 0 8px 2px var(--primary-glow),
                    0 0 16px 4px var(--primary-glow-faded);
      }
      
      /* Default state for the neon button */
      .neon-glow-button {
        transition: all 0.3s ease;
        box-shadow: 0 0 2px var(--primary-glow-faded), inset 0 0 2px var(--primary-glow-faded);
      }

      /* Hover and active state for the neon button */
      .neon-glow-button:hover, .neon-glow-button.active {
        color: var(--primary-glow);
        background: var(--primary-glow-faded);
        border-color: var(--primary-glow);
        box-shadow: 0 0 5px var(--primary-glow), 0 0 10px var(--primary-glow-faded), inset 0 0 5px var(--primary-glow-faded);
      }

      /* Animation: Element fades in while moving up from the bottom */
      .fade-in-up {
        animation: fadeInUp 0.5s ease-out forwards;
        opacity: 0;
        transform: translateY(20px);
      }
      @keyframes fadeInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Custom scrollbar styling */
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: transparent;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: var(--primary-glow-faded);
        border-radius: 3px;
        border: 1px solid var(--primary-glow);
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
         background: var(--primary-glow);
      }
      
      /* Watermark animation */
      .watermark {
        animation: watermark-pulse 8s infinite ease-in-out;
      }
      @keyframes watermark-pulse {
        0%, 100% {
          opacity: 0.05;
          transform: scale(1);
        }
        50% {
          opacity: 0.08;
          transform: scale(1.02);
        }
      }

      /* Styling for CRT (like an old monitor) effect */
      .crt-effect {
        position: relative;
        overflow: hidden;
      }
      /* To add a scanline effect (horizontal lines) */
      .crt-effect::before {
        content: " ";
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
        z-index: 2;
        background-size: 100% 2px, 3px 100%;
        pointer-events: none;
        animation: scanline 20s linear infinite; /* Made slower */
      }
      @keyframes scanline {
        0% { transform: translateY(0); }
        100% { transform: translateY(100vh); }
      }
      /* To add a screen flicker effect (slight blink) */
      .crt-effect::after {
        content: " ";
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: rgba(18, 16, 16, 0.1);
        opacity: 0;
        z-index: 2;
        pointer-events: none;
        animation: flicker 0.15s infinite;
      }
      @keyframes flicker {
        0% { opacity: 0.1; }
        50% { opacity: 0.2; }
        100% { opacity: 0.1; }
      }
      
      /* --- NEW STYLES FOR CODE BLOCKS --- */
      .code-block {
        background: rgba(0,0,0,0.4);
        border: 1px solid var(--border-glass);
        border-radius: 0.5rem; /* rounded-lg */
        overflow: hidden;
        margin-top: 0.75rem; /* my-3 */
        margin-bottom: 0.75rem;
      }
      .code-block pre {
        padding: 1rem; /* p-4 */
        font-family: 'Roboto Mono', monospace;
        font-size: 0.875rem; /* text-sm */
        white-space: pre-wrap;
        word-break: break-all;
        background-color: transparent;
      }
      .code-block code {
          line-height: 1.5;
      }
      .syntax-keyword { color: var(--primary-glow); font-weight: 500; }
      .syntax-string { color: #9CDCFE; } /* A light blue */
      .syntax-comment { color: #6A9955; font-style: italic; } /* A muted green */
      .syntax-number { color: #B5CEA8; } /* A light green/off-white */
      .syntax-function { color: #DCDCAA; } /* A yellowish color */
      .syntax-operator { color: var(--text-medium); }
      .syntax-class { color: #4EC9B0; } /* Teal color */

      /* --- NEW STYLES FOR MARKDOWN --- */
      .markdown-content ul {
        list-style-type: disc;
        padding-left: 1.5rem;
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
      }
      .markdown-content li {
        margin-bottom: 0.25rem;
      }
      .markdown-content a {
        color: var(--accent1-glow);
        text-decoration: underline;
        text-underline-offset: 2px;
        transition: color 0.2s ease;
      }
      .markdown-content a:hover {
        color: var(--primary-glow);
      }
      .markdown-content strong {
        color: var(--text-light);
        font-weight: 600;
      }
      .markdown-content em {
        font-style: italic;
        color: var(--text-medium);
      }
      
      /* --- NEW, MORE PERFROMANT ANIMATIONS --- */
      /* Python Loading Screen: Data stream effect */
      @keyframes data-stream-x {
        from { opacity: 0; transform: translateX(-50vw) scale(0.5); }
        to { opacity: 0; transform: translateX(0) scale(1); }
      }
      @keyframes data-stream-y {
        from { opacity: 0; transform: translateY(-50vh) scale(0.5); }
        to { opacity: 0; transform: translateY(0) scale(1); }
      }

      /* Python Loading Screen: Status text cycler */
      @keyframes status-cycle {
        0% { transform: translateY(0%); }
        11% { transform: translateY(0%); }
        11.11% { transform: translateY(-11.11%); }
        22.11% { transform: translateY(-11.11%); }
        22.22% { transform: translateY(-22.22%); }
        33.22% { transform: translateY(-22.22%); }
        33.33% { transform: translateY(-33.33%); }
        44.33% { transform: translateY(-33.33%); }
        44.44% { transform: translateY(-44.44%); }
        55.44% { transform: translateY(-44.44%); }
        55.55% { transform: translateY(-55.55%); }
        66.55% { transform: translateY(-55.55%); }
        66.66% { transform: translateY(-66.66%); }
        77.66% { transform: translateY(-66.66%); }
        77.77% { transform: translateY(-77.77%); }
        88.77% { transform: translateY(-77.77%); }
        88.88% { transform: translateY(-88.88%); }
        100% { transform: translateY(-88.88%); }
      }

      /* --- NEW: "COGNITIVE CHANNELING" ANIMATIONS --- */
      
      /* 1. Input bar pulse on send */
      .input-is-sending {
        animation: input-pulse 0.4s ease-out;
      }
      @keyframes input-pulse {
        0% { 
          box-shadow: inset 0 0 2px 1px var(--primary-glow-faded),
                      0 0 8px 2px var(--primary-glow),
                      0 0 16px 4px var(--primary-glow-faded);
          border-color: var(--primary-glow);
        }
        50% { 
          box-shadow: inset 0 0 4px 2px var(--primary-glow),
                      0 0 16px 8px var(--primary-glow),
                      0 0 32px 16px var(--primary-glow-faded);
          border-color: var(--primary-glow);
        }
        100% {
           box-shadow: inset 0 0 2px 1px var(--primary-glow-faded),
                      0 0 8px 2px var(--primary-glow),
                      0 0 16px 4px var(--primary-glow-faded);
           border-color: var(--primary-glow);
        }
      }
      
      /* 2. Message bubble forming from particles */
      .new-message-bubble {
        opacity: 0;
        /* The animation is now longer to sync with particles */
        animation: form-in-bubble 0.4s ease-out forwards;
        animation-delay: 0.6s; 
      }
      @keyframes form-in-bubble {
        from {
          opacity: 0;
          transform: scale(0.7) translateY(10px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      /* --- NEW: "CODING CORE DECONSTRUCTION" SPLASH SCREEN --- */
      .animate-core-disintegration {
          /* Main container for the animation. It's a relative box for overlays. */
          position: relative;
          overflow: hidden;
          /* This ensures after the animation, the element is gone, letting the chat view appear. */
          animation: core-disintegration-hide 0.1s 1.9s forwards;
      }
      /* Apply animations to the direct child (the content being wrapped) */
      .animate-core-disintegration > * {
          animation: content-glitch-exit 0.8s ease-in-out forwards, 
                     content-fade-out-exit 1.2s 0.8s ease-in forwards;
      }
      /* A separate overlay for the scanline wipe effect */
      .scanline-wipe-overlay {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(to bottom, transparent 30%, var(--bg-dark) 100%);
          transform: translateY(-100%);
          /* The wipe animation starts after 0.5s and lasts 1.5s */
          animation: scanline-wipe-down-exit 1.5s 0.5s forwards cubic-bezier(0.7, 0, 0.3, 1);
          z-index: 10;
      }
      /* This keyframe simply hides the container after all animations are done. */
      @keyframes core-disintegration-hide {
          to {
              opacity: 0;
              visibility: hidden;
          }
      }
      /* The glitch effect for the content */
      @keyframes content-glitch-exit {
          0% { transform: translate(0, 0); }
          15% { transform: translate(-4px, 2px) skewX(-4deg); }
          30% { transform: translate(4px, -2px) skewX(4deg); }
          45% { transform: translate(-2px, 1px) skewX(-2deg); }
          60% { transform: translate(2px, -1px) skewX(2deg); }
          75%, 100% { transform: translate(0, 0); }
      }
      /* The fade, blur, and scale effect for the content */
      @keyframes content-fade-out-exit {
          from {
              opacity: 1;
              filter: blur(0px);
              transform: scale(1);
          }
          to {
              opacity: 0;
              filter: blur(10px);
              transform: scale(0.96);
          }
      }
      /* The scanline moving down */
      @keyframes scanline-wipe-down-exit {
          from { transform: translateY(-100%); }
          to { transform: translateY(0%); }
      }

    </style>
    <script>
    // Configuring Tailwind CSS
    tailwind.config = {
      darkMode: 'class', // The app is now in dark mode by default
      theme: {
        extend: {
          // Adding custom fonts to Tailwind
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            heading: ['Rajdhani', 'sans-serif'],
            mono: ['Roboto Mono', 'monospace'],
          },
          // Using CSS variables in Tailwind's colors
          colors: {
            background: 'var(--bg-dark)',
            card: 'var(--bg-glass)',
            'card-foreground': 'var(--text-light)',
            'card-border': 'var(--border-glass)',
            primary: 'var(--primary-glow)',
            'primary-foreground': 'var(--bg-dark)',
            'input': 'hsla(240, 10%, 15%, 0.8)',
            'input-border': 'hsla(240, 10%, 25%, 0.8)',
            accent1: 'var(--accent1-glow)',
            accent2: 'var(--accent2-glow)',
          },
          // Defining custom animations
          animation: {
            'typing-reveal': 'typing-reveal 1.5s steps(30, end) forwards',
            'cursor-blink': 'cursor-blink 1s steps(2, start) infinite',
            'text-glow': 'text-glow 2.5s ease-in-out infinite alternate',
            'shimmer-load': 'shimmer-load 2s infinite linear',
            'subtle-fade': 'subtle-fade 3s infinite ease-in-out',
            'glitch': 'glitch 1s linear infinite',
            'neon-flicker': 'neon-flicker 1.5s infinite alternate',
            'orb-pulse': 'orb-pulse 1.5s ease-in-out infinite',
            'path-draw': 'path-draw 3s ease-out forwards',
            'status-cycle': 'status-cycle 4s steps(9, end) forwards',
          },
          // Keyframes for animations
          keyframes: {
             'typing-reveal': { // To show text being typed
              'from': { width: '0' },
              'to': { width: '100%' }
            },
            'cursor-blink': { // To make the typing cursor blink
              'to': { visibility: 'hidden' }
            },
            'text-glow': { // Glow animation on text
              'from': { 
                textShadow: '0 0 10px hsl(48 100% 60% / 0.7), 0 0 20px hsl(48 100% 60% / 0.4)' 
              },
              'to': { 
                textShadow: '0 0 20px hsl(48 100% 60% / 0.9), 0 0 40px hsl(48 100% 60% / 0.6)' 
              },
            },
            'shimmer-load': { // Shimmer effect in loading state
              '0%': { transform: 'translateX(-100%)' },
              '100%': { transform: 'translateX(100%)' },
            },
            'subtle-fade': { // Gentle fade in/out effect
              '0%, 100%': { opacity: '0.7' },
              '50%': { opacity: '1' },
            },
            'glitch': { // Glitch effect
              '2%, 64%': { transform: 'translate(2px, 0) skew(0deg)' },
              '4%, 60%': { transform: 'translate(-2px, 0) skew(0deg)' },
              '62%': { transform: 'translate(0, 0) skew(5deg)' },
            },
            'neon-flicker': { // Neon light-like flicker effect
              '0%, 100%': { opacity: 1, textShadow: '0 0 10px var(--primary-glow), 0 0 20px var(--primary-glow), 0 0 40px var(--primary-glow)' },
              '50.2%': { opacity: 0.7, textShadow: '0 0 5px var(--primary-glow), 0 0 10px var(--primary-glow)' },
            },
            'orb-pulse': { // Pulse effect for loading indicator
              '0%, 100%': { transform: 'scale(1)', boxShadow: '0 0 5px var(--primary-glow), 0 0 10px var(--primary-glow)' },
              '50%': { transform: 'scale(1.1)', boxShadow: '0 0 15px var(--primary-glow), 0 0 25px var(--primary-glow)' },
            },
            'path-draw': { // To show an SVG path being drawn
              'to': { strokeDashoffset: 0 }
            }
          }
        }
      }
    }
  </script>
<!-- Loading Pyodide (Python in browser) -->
<script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
<!-- Importmap to support ES Modules. Importing React and Gemini SDK from a CDN. -->
<script type="importmap">
{
  "imports": {
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom": "https://aistudiocdn.com/react-dom@^19.1.1",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.21.0"
  }
}
</script>
</head>
<body>
<noscript>You need to enable JavaScript to run this app.</noscript>
<!-- The React app will be rendered in this element -->
<div id="root"></div>
</body>
</html>